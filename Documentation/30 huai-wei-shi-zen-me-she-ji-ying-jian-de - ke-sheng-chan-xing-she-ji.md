三十 可生产性设计
======================

原创 硬件十万个为什么 2020-03-16 21:11:16

锤子手机似乎好像已经淡出人们的视线。锤子T1手机追求罗永浩的理想主义，而导致手机生产不出来的惨痛教训，先帮助大家回顾一下：

1、罗永浩团队耗费精力、频获好评的设计细节，在一线工人眼中导致多道生产工序繁琐，甚至直接导致此前低良品率问题。

2、锤子手机采用的是玻璃纤维增强树脂与不锈钢骨架一体成型的特殊材质，在这种材质上打孔，经常遇到碎裂的问题。

3、一位工人回忆，刚来新产线的第一天，经过包装后的锤子成品，300台当中做出7台合格品。经过一个多月的磨合，虽然良率有所提高，但每天也只有不到20%的良品率。

4、对外观造型的苛刻直接导致了生产过程的复杂和繁琐。富士康生产线上的抱怨声，也因此有迹可循。

5、大灰屏，和红米差不多。原因是屏幕贴合的不好，导致屏幕反光发灰，类似你贴膜没贴好气泡反光发灰。

6、屏易碎，推测原因是在屏幕上加了三个实体键之后，导致屏幕受力不均，这是设计问题，无可挽回。生产过程中就出现碎屏。

  

**定义：**

可制造性设计的核心是在不影响产品功能的前提下，从产品的初步规划到产品的投入生产的整个设计过程进行参与，使之标准化、简单化，让设计利于生产及使用。减少整个产品的制造成本（特别是元器件和加工工艺方面）。减化工艺流程，选择高通过率的工艺，标准元器件，选择减少模具及工具的复杂性及其成本。

**简单的说，就是设计出来的东西不能让产线生产很麻烦，导致生产人员骂娘！设计出来的产品不要跟锤子手机一样良率比较低，生产成本昂贵。**

![华为是怎样开发硬件的  之三十——可生产性设计](http://p3.pstatp.com/large/pgc-image/d2fb0e4f60894d0d92c66d6b87848920)

**执行:**

由于DFx很少在小公司提及，或者类似可靠性设计、节能、环保、可供应性等范畴，只不过不是通过“DFx”这个装逼神词被提及的。所以很多人看到DFx这个词觉得高大上。

我们解构一下DFM这词的执行过程：

**第一步、建立意识。**设计人员考虑的不只是功能实现这一首要目标，还要兼顾生产制造方面的问题。这就是讲，不管你设计的产品功能再完美、再先进，但不能顺利制造生产或要花费巨额制造成本来生产，这样就会造成产品成本上升、销售困难、失去市场。（设计人员兼顾到生产制造方面的问题，不但需要设计人员本身提升生产考虑方面的技能和经验，同时需要全员提升DFM的意识，特别是生产和设计部门这两方面的领导更要确信DFM的必要。）

**第二步，提升设计的生产考虑。**统一设计部门和生产部门之前的信息，建立有效的沟通机制。这样设计人员就能在设计的同时考虑生产过程，使自己的设计利于生产制造。

**第三步，生产人员辅助设计。**选择有丰富生产经验的人员参与设计，对设计成果进行可制造方面的测试和评估，辅助设计人员工作。

**第四步，让设计人员去生产线。**安排合理的时间给设计人员，以及DFM工程师到生产第一线了解生产工艺流程及生产设备，了解生产中的问题。以便更好、更系统地改善自己的设计。

  

**DFM的意义**

降低成本、提高产品竞争力

低成本、高产出是所有公司永恒的追求目标。通过实施DFM规范，可有效地利用公司资源，低成本、高质量、高效率地制造出产品。如果产品的设计不符合公司生产特点，可制造性差，即就要花费更多的人力、物力、财力才能达到目的。同时还要付出延缓交货，甚者失去市场的沉重代价。

优化生产过程，提高生产效率

DFM把设计部门和生产部门有机地联系起来，达到信息互递的目的，使设计开发与生产准备能协调起来、。统一标准，易实现自动化，提高生产效率。同时也可以实现生产测试设备的标准化，减少生产测试设备的重复投入。

利于技术转移，加强公司协作

现在很多企业受生产规模的限制，大量的工作需外加工来进行，通过实施DFM，可以使加工单位与需加工单位之间制造技术平稳转移，快速地组织生产。可制造性设计的通用性，可以使企业产品实现全球化生产。

新产品开发及测试的基础

没有适当的DFM规范来控制产品的设计，在产品开发的后期，甚至在大批量生产阶段才发现这样或那样的组装问题，此时想通过设计更改来修正，无疑会增加开发成本并延长产品生产周期。所以新品开发除了要注重功能第一之外，DFM也是很重要的。

适合电子组装工艺新技术

现在，电子组装工艺新技术的发展日趋复杂，为了抢占市场，降低成本，公司开发一定要使用最新最快的组装工艺技术，通过DFM规范化，才能跟上其发展的脚步。

  

**PCBA相关的DFM设计**

电子产品的可制造性设计核心在于印制电路板PCBA的DFM，印制电路板的DFM即是指板级电路模块面向制造的设计技术，此技术旨在开展高密度、高精度板级电路模块的组装设计、制造系统资源能力与状态的约束性分析，最终形成支持开发人员对电路模块的可制造性设计标准及指导性规范。涉及主要研究内容如下。

(1)基于公司产品特点的电子元器件的选择技术、新型封装元器件的焊盘图形设计技术；

不同电子产品采用的元器件封装类型有很大的差别，比如便携类电子产品，如手机、PDA、笔记本电脑、数码相机等，采用的元器件一定是微型化的表面贴装器件，因为这样封装的器件有助于产品的微型化和便携性，而对于电源类产品，由于受表贴器件功率太小的限制，一般使用较多的插装类大功率器件，因此不同产品在制定器件选择的原则时会有较大的不同。这些器件的不同选择准则在产品概念设计阶段非常重要，它会影响到产品工艺路线的设计和制造效率。比如，对于便携式产品98%以上的器件都是SMD器件，如果设计人员没有DFM概念，选择了2%的THT器件，这样就会给后续的工艺路线设计带来极大的不便，如何为2%的THT器件设计加工路线将会成为一大困扰，如果在器件选择阶段避免了这个问题，后续的工艺路线设计就非常简单和高效。

(2)PCB几何尺寸设计、自动化生产所需的传送边、定位孔、定位符号设计。

尽管印制电路板种类繁多，制造工艺不尽相同，但是体现在产品可制造性上主要反映在以下设计要素上：印制电路的外形尺寸和精度，受设备加工尺寸和精度要求限制，设计时应考虑最大和最小加工尺寸，尺寸精度和工艺边的设计。在考虑印制电路板电气性能的前提下，要考虑多层印制板最多层数的限制，中间介质层和板的总厚度要求，比如层数增加而总厚度又有限制，这时对PCB的可制造性就会带来挑战。

(3)PCB加工能力设计，如最小线宽、最小线间距、最小过孔孔径、最小厚径比设计

(4)组装工艺辅助材料的选用技术

组装工艺的辅助材料也是DFM设计的重要内容，比如采用无铅焊接后，相应的助焊剂就需要更换为与无铅焊料相兼容的；又比如，对于散热器与IC器件之间的导热材料选择时必须考虑和分析器件的功率大小和散热需求。

(5)印制电路板工艺路线设计

工艺路线是整个电路板组装的加工流程，工艺路线决定了PCBA的加工效率成本和元器件的选择，常见的组装工艺路线有以下几种：

![华为是怎样开发硬件的  之三十——可生产性设计](http://p1.pstatp.com/large/pgc-image/ce00ad0ef5124b5ba8af8b090e58074f)

图1 电子组装常见工艺路线

对于不同的工艺路线，在选择器件时就要考虑，如果PCBA设计为双面SMT工艺，这时就要保证所有的元件都是SMD器件，并且在PCB布局时要考虑到那些较重的IC器件不布局到第一次加工面（B面），因为对于双面SMT工艺来说，加工T面时，B面的器件会再次经受一次回流过程，太重的器件可能会在焊膏融化时出现掉件问题。同样对于正面是SMT工艺，而背面是波峰焊工艺的单板，必须考虑到有些器件是不能用波峰焊来焊接的，比如细间距的SOP和QFP器件，BGA器件，即使对于间距较大的SOP器件，在布局设计时也要考虑到波峰焊特点，对器件的布局方向做要求，使用的焊盘要考虑到波峰焊的特点，使用偷锡焊盘设计，以避免在波峰焊过程中器件引脚间连锡缺陷的发生。

![华为是怎样开发硬件的  之三十——可生产性设计](http://p1.pstatp.com/large/pgc-image/9420de68a5af453193405041b795e5dd)

图2 不能进行波峰焊接的IC器件：BGA和QFN

![华为是怎样开发硬件的  之三十——可生产性设计](http://p3.pstatp.com/large/pgc-image/6a80fd2734db45d3896e86a2f2053906)

图3 考虑波峰焊工艺的SOP偷锡焊盘设计及布局要求

![华为是怎样开发硬件的  之三十——可生产性设计](http://p1.pstatp.com/large/pgc-image/5762059975904c1fa2f9eec4c5a47abc)

图4 考虑波峰焊工艺的QFP偷锡焊盘设计及布局要求

(6)印制电路板印刷钢网设计

钢网是进行SMT焊料印刷必须的工具，钢网设计主要包括根据PCB和元器件的特点来选择钢网的加工类型，比如对于有细间距IC器件的PCB，其组装时对印刷精度有较高的要求，这时就需要选择钢网开口精度准确的加工方式，比如激光切割加电抛光，或电铸钢网。而对于没有细间距器件的PCB组装来说，加工时选择普通激光切割的钢网就可以了。对于那些比较复杂的PCB，往往在PCB上有细间距的IC器件，同时也会有些器件对焊膏的需求量很大，细间距IC器件要求的锡膏量较少，所以钢网的厚度要求薄，比如0.12mm厚，而要求锡膏量多的器件需要厚的钢网才能保证焊接的可靠，这时就会出现矛盾，怎么办？因为只有一张钢网，这种情况阶梯形钢网就是一个很好的选择，阶梯钢网是在钢网的不同位置有不同的厚度，厚的地方可以是0.15mm，而薄的地方可以是0.12mm，这样通过使用阶梯钢网就满足了不同器件对锡膏量的不同要求。

![华为是怎样开发硬件的  之三十——可生产性设计](http://p9.pstatp.com/large/pgc-image/51b758b6e85f485983188004088120ea)

图5 化学蚀刻与激光切割钢网的对比

![华为是怎样开发硬件的  之三十——可生产性设计](http://p1.pstatp.com/large/pgc-image/8b3825a83e6243e7b95c348535b173df)

图6 Step Stencil用于使用不同器件锡膏量不同要求的阶梯钢网

(7)组装设备资源能力分析技术

DFM有两层含义，一层含义是在产品设计时要考虑到制造能力的限制，保证设计满足制造能力的要求，另一层含义是在规划一条生产线时，要根据产品的特点来进行设备的配置，对组装设备的资源进行规划和分析。比如对于手机产品的制造来说，由于手机电路板大量使用0402以下的CHIP器件，这样的小器件的检测必须配备AOI设备。

(8)印制电路板的可制造性设计规范

印制电路板的可制造性设计规范作为指导产品进行DFM设计的纲领性文件是必不可少的，应根据公司产品特点、质量要求和加工能力制定本公司的DFM设计规范。DFM设计规范应对PCB设计的主要方面进行明确而具体的要求，用来指导公司PCB的工艺设计。

(9)印制电路板的可制造性设计流程与平台

可制造性流程与工艺平台是进行DFM设计的保证，DFM设计不仅是一个技术工作，还是一个管理工作，因为DFM的工作实现必须有流程的保证和平台的支撑，只有流程建立了，节点定义了，人员责任明确了，DFM的工作才能落实；同样这些工作的技术支撑就是平台，比如DFM软件分析平台，如VALOR软件工具，可以对PCB的可制造性进行详细的分析，将公司的设计规范加入VALOR规则中，它就可以自动对PCB进行可制造性分析。

![华为是怎样开发硬件的  之三十——可生产性设计](http://p1.pstatp.com/large/pgc-image/5e16128ca0e94c37a0a1b893eca6d457)

图7 DFM分析软件VALOR对PCB设计的分析

**电子产品DFM设计案例**

一般来说，在电子产品中价格最昂贵的元件是印制电路板PCB，没有推行DFM设计的公司在产品概念设计阶段很少分析PCB制造成本的影响，比如拼版方式的不同就会对PCB的制造成本产生较大影响，下图8和图9所示就是考虑DFM要求进行拼版优化和未进行拼版优化时PCB利用率的巨大差异。通过拼版优化PCB板材的利用率可以从58%提高到83%。

![华为是怎样开发硬件的  之三十——可生产性设计](http://p3.pstatp.com/large/pgc-image/32447facbbfa44e2bcc4adb3c327a490)

图8 原始设计的PCB布局

![华为是怎样开发硬件的  之三十——可生产性设计](http://p3.pstatp.com/large/pgc-image/a141745714404daa8e1e7864b602c681)

图9 拼版优化后的PCB布局

图10(a)所示为焊盘设计时没有考虑到波峰焊接过程的特点，即器件焊盘设计太短，导致波峰焊焊接时由于器件遮挡锡波的阴影效应作用，使得左侧焊盘漏焊；而图10(b)则通过焊盘加长就解决了此问题。这是一个典型的DFM问题。

![华为是怎样开发硬件的  之三十——可生产性设计](http://p1.pstatp.com/large/pgc-image/d4ebe67c9f244f6089ece8eb674e4569)

图10 焊盘设计太短在波峰焊阴影效应作用下出现漏焊缺陷及改正焊盘长度后问题得以解决

  

结构相关的DFM

1、连接器

![华为是怎样开发硬件的  之三十——可生产性设计](http://p1.pstatp.com/large/pgc-image/61d7096a400345df9e1c1fc64708ef5a)

连接器应有识别栓以免配合时插错位置;连接器接片材料应一致(镀层应为金-金,锡-锡等),同一产品禁止使用不同供应商的连接器避免兼容性的问题;

连接器导向柱

![华为是怎样开发硬件的  之三十——可生产性设计](http://p1.pstatp.com/large/pgc-image/8789c14cd098453abe3a56d684444c5d)

2、进行整体机械装配和公差公析

如结合件的配合;对设计进行评估,以减少组件数目;进行工艺兼容性审核;进行共用性检查,以确保单一物料的订购和再设计最少化;元器件参考代码(如R1,R2等)是否与元器件、图纸、工艺指导一致；电路板上的元器件是否按标签格删配置,以避免特殊工装;电路板间距是否合理,以免影响后续插装等操作;

3、关于螺钉

如果可能,应避免使用螺钉;只使用标准件而且尺寸种类最小化;带螺丝紧固件的种类及数量应该最少化且应尽可能使用自锁性垫圈;应尽可能使用自紧式、带螺丝的插装件;紧固件的扭力必须在正式图纸文件上有明确规定;是否有足够的间距允许紧固件装配工具进入;避免使用铆钉,而使用螺钉;

4.电路板上的安装孔几组装/测试用的工装孔应是非电镀孔;

5.同等尺寸形状的电路板的工装孔尺寸/位置应一致,一减少专门夹具并节约机器设置时间;

6.减少装配时间

电缆连接器是否有自锁设计而不需另有工具?装配设计中是否考虑了最小电缆弯曲半径?所有预装的电缆都应明确标识并与图纸一致;是否易于拆卸维护/再利用/维修?应尽可能多地使用标准件;

  

**工艺相关DFM**

1.尽量避免在PCB两面均安放PTH元件，因为大幅度增加装配的人工和时间。 如果元件必须放在底面，则应使其物理上尽量靠近以便一次完成防焊胶带的遮蔽与剥离操作。尽量使元件均匀的分布在PCB上，以降低翘曲并有助于使其在过波峰焊时热量分布均匀！

2.元件引角的形状对焊膏通孔工艺（Paste-in-hole）选用圆形或方形是最好的。少选长方形或交叉形的。元件间距波峰焊时建议0.070",焊膏通孔工艺0.100".选用焊膏印孔工艺的元件能够耐回流焊接的温度，但波峰焊和焊膏通孔工艺都需要有支持块（stand-off）以便在散热时孔中的空气散出，防止气泡的产生。小于0.062”厚的PCB选用焊膏通孔工艺比较好，当厚度大于0.093”时对波峰焊和焊膏通孔工艺都比较难。

3.在自动化程度越来越高的组装工艺中，手工焊接和侵焊是不得已的做法。一般因为：SMT元件不能过回流焊接；双面PTH；第二面元件太重；第二面元件太高不能用选择性波峰焊；非常少的第二面元件不值得使用整条自动生产线。

4.特殊工艺如用于固定散热器的材料；低温的附件和返修所需的特殊焊锡丝；手工操作需要新的设备和工具；组装和返修空孔在焊盘内的元件等。另外看有没有新的工艺和新的设备需求。

5.导线与连接器：不要将导线或者电缆线直接接在PCB上，而应使用连接器，如果导线一定要直接焊到板子上，则导线末端要用一个导线对板子的端子进行端接。从线路板连出的导线应集中在板子的某个区域，这样可以将他们套在一起，以免影响其他的元件。使用不同颜色的导线以防止装配过程中出现错误,各公司可采用自己的一套颜色方案,如所有产品数据线的高位用蓝色表示而低位用黄色表示等.

  

**关于华为的DFM**

1、生产人员在IPD流程的各个环节，都参与关键文档的评审，参与所有关键技术评审点的审核。

  

2、研发阶段，结构件、电路板、所有组件经历大量的试装。提早进行各种试装，提早发现装配方式，结构干涉，装配效率等问题。

3、新生产导入（NPI）

![华为是怎样开发硬件的  之三十——可生产性设计](http://p1.pstatp.com/large/pgc-image/1fe228f4c88c44078370f558375a626a)

4、制造的发言权非常高，生产对设计中，不满足DFM要求的设计，有一票否决权。

### 5、建立DFM规范

DFM文件应结合本公司的生产设计特点、工艺水平、设备硬件能力、产品特点等进行合理的制订。这样，在进行设计时，选择组装技术就要考虑当前和未来工厂的生产能力。从工业造型创意设计方面做出独特的思路，根据人体工程学原理设计出合理又实用的产品。这些文件可以是很简单的一些条款，进而也可以是一部复杂而全面的设计手册。另外，文件必须根据公司生产发展进行适时维护，以使其能更准确地符合当前设计及生产需求。

  

### 6、DFM检查表

在对产品设计进行策划的同时，根据公司DFM规范文件建立DFM检查表。检查表是便于系统、全面地分析产品设计的工具，其应包括检查项目、关键环节的处理等。从内容上讲主要包含以下信息：

a． 产品信息、数据（如电路原理图、PCB图、组装图、CAD结构文件等内容）。

b． 选择生产制造的大致加工流程：AI、SMT、波峰焊、手焊等。

c． PCB尺寸及布局。

d． 元器件的选择和焊盘、通孔设计。

e． 生产适用工艺边、定位孔及基准点的设计。

f． 执行机械组装的各项要求。